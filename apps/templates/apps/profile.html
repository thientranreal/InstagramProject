{% extends 'apps/index.html' %} {% load static %} {% block profile %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/PersonalPage.css' %}" />
<div class="container" style="margin-top: 60px">
  {% if nguoi_dung %}
  <div class="profile">
    <div class="profile-image">
      {% if nguoi_dung.avatar %}
      <img src="{{nguoi_dung.avatar.url}}" alt="Avatar" />
      {% else %}
      <img src="{% static 'assets/images/profile/status-0.png' %}" />
      {% endif %}
    </div>

    <div class="profile-user-settings">
      <h1 class="profile-user-name">{{ nguoi_dung.user}}</h1>
      {%if edit%}
      <a href="{% url 'editProfile' %}" style="color: black"
        ><button class="btn profile-edit-btn">Edit Profile</button></a
      >
      {%endif%}

      <!-- <button class="btn profile-settings-btn" aria-label="profile settings">
            <i class="fas fa-cog" aria-hidden="true"></i>
          </button> -->
    </div>

    <div class="profile-stats">
      <ul>
        {%if so_luong_baidang%}
        <li>
          <span class="profile-stat-count">{{ so_luong_baidang }}</span> Posts
        </li>
        {%endif%}
        <li>
          <span class="profile-stat-count">{{ nguoi_dung.sobanbe }}</span>
          Friends
        </li>
      </ul>
    </div>

    <div class="profile-bio">
      <p>
        <span class="profile-real-name" style="padding-right: 10px"
          >{{nguoi_dung.user.last_name}} {{nguoi_dung.user.first_name}}</span
        >{{nguoi_dung.mota}}
      </p>
    </div>
  </div>
  {% endif %}
  <!-- End of profile section -->
</div>
<!-- End of container -->

<main>
  <div class="container">
    <div class="gallery">
      {%for baidang in danh_sach_baidang%}
      <div class="gallery-item" tabindex="0">
        {% if baidang.hinhanh %}
        <img src="{{baidang.hinhanh.url}}" class="gallery-image" alt="" />
        {% else %}
        <img
          src="{% static 'assets/images/profile/status-0.png' %}"
          class="gallery-image"
          alt=""
        />
        {% endif %}

        <div class="gallery-item-info">
          <ul>
            <li class="gallery-item-likes">
              <span class="visually-hidden">Likes:</span
              ><i class="fas fa-heart" aria-hidden="true"></i>
              {{baidang.tongluotthich}}
            </li>
            <li class="gallery-item-comments">
              <span class="visually-hidden">Comments:</span
              ><i class="fas fa-comment" aria-hidden="true"></i>
              {{baidang.tongluotbinhluan}}
            </li>
            <li class="gallery-item-more" style="padding-left: 20px;">
              <div class="dropdown" onmouseenter="showDropdown()" onmouseleave="hideDropdown()">
                  <i class="fas fa-ellipsis-h" aria-hidden="true"></i>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <form action="{% url 'xoa_baidang' baidang.id %}" method="post" onsubmit="return confirm('Bạn có chắc chắn muốn xóa bài đăng này không?')">
                      {% csrf_token %}
                      <a class="dropdown-item" href="#" onmouseenter="cancelHideTimer()" onmouseleave="hideDropdown()"><button type="submit" class="btn btn-danger" name="action" value="xoa">Xóa</button></a>
                      <a class="dropdown-item" href="{% url 'editPost' baidang_id=baidang.id %}" onmouseenter="cancelHideTimer()" onmouseleave="hideDropdown()"><button type="button" class="btn btn-primary" name="action" value="sua">Chỉnh sửa</button></a>
                    </form>
                  </div>
              </div>
          </li>
          
          
          </ul>
          
        </div>
      </div>

      {%endfor%}
    </div>
    <!-- End of gallery -->

    <div class="loader"></div>
  </div>
  <!-- End of container -->
</main>
<script src="" async defer></script>
<script src="{% static 'js/PersonalPage.js' %}"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock profile %}
